version: 1
metadata:
  name: LDAP Service Account
  labels:
    blueprints.goauthentik.io/system-bootstrap: "true"
    blueprints.goauthentik.io/description: |
      This blueprint configures the default LDAP service account.
context:
  username: !Env [AUTHENTIK_BOOTSTRAP_LDAPSERVICE_USERNAME, "ldapservice"]
  password: !Env [AUTHENTIK_BOOTSTRAP_LDAPSERVICE_PASSWORD, null]
entries:
  - model: authentik_core.user
    state: created
    id: ldap-service-account
    identifiers:
      username: !Context username
    attrs:
      name: LDAP Service account
      type: service_account
      password: !Context password
