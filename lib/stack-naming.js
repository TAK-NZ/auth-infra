"use strict";
/**
 * Utility functions for consistent stack naming across the application
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.BASE_EXPORT_NAMES = exports.AUTH_EXPORT_NAMES = exports.FIXED_STACK_CONFIG = void 0;
exports.generateStackName = generateStackName;
exports.generateAuthInfraStackName = generateAuthInfraStackName;
exports.createDynamicExportName = createDynamicExportName;
exports.createBaseImportValue = createBaseImportValue;
exports.createAuthImportValue = createAuthImportValue;
/**
 * Fixed configuration for the organization
 */
exports.FIXED_STACK_CONFIG = {
    PROJECT: 'TAK',
    COMPONENT: 'AuthInfra'
};
/**
 * Generate a consistent stack name based on configuration
 * @param config.environment - The environment/deployment identifier (from stackName in config)
 */
function generateStackName(config) {
    const parts = [
        config.project || exports.FIXED_STACK_CONFIG.PROJECT,
        config.environment || 'MyFirstStack', // This comes from stackName in config
        config.component || exports.FIXED_STACK_CONFIG.COMPONENT
    ];
    if (config.suffix) {
        parts.push(config.suffix);
    }
    return parts.join('-');
}
/**
 * Generate consistent stack name for the Auth Infra stack
 * @param environment - Environment name (e.g. 'prod', 'dev', 'test', etc.)
 * @returns Full stack name for the auth infrastructure
 */
function generateAuthInfraStackName(environment) {
    return generateStackName({
        project: exports.FIXED_STACK_CONFIG.PROJECT,
        environment,
        component: exports.FIXED_STACK_CONFIG.COMPONENT
    });
}
/**
 * Common export names for auth infrastructure resources
 */
exports.AUTH_EXPORT_NAMES = {
    DATABASE_ENDPOINT: 'Database-Endpoint',
    DATABASE_SECRET_ARN: 'Database-Secret-ARN',
    REDIS_ENDPOINT: 'Redis-Endpoint',
    REDIS_AUTH_TOKEN_ARN: 'Redis-AuthToken-ARN',
    EFS_ID: 'EFS-ID',
    EFS_MEDIA_ACCESS_POINT: 'EFS-Media-AccessPoint',
    EFS_TEMPLATES_ACCESS_POINT: 'EFS-Templates-AccessPoint',
    AUTHENTIK_SECRET_KEY_ARN: 'Authentik-SecretKey-ARN',
    AUTHENTIK_ADMIN_TOKEN_ARN: 'Authentik-AdminToken-ARN',
    AUTHENTIK_LDAP_TOKEN_ARN: 'Authentik-LdapToken-ARN',
    AUTHENTIK_ALB_DNS: 'Authentik-ALB-DNS',
    AUTHENTIK_URL: 'Authentik-URL',
    LDAP_ALB_DNS: 'LDAP-ALB-DNS',
    LDAP_ENDPOINT: 'LDAP-Endpoint',
    LDAPS_ENDPOINT: 'LDAPS-Endpoint',
    LDAP_TOKEN_RETRIEVER_LAMBDA_ARN: 'LDAP-TokenRetriever-Lambda-ARN'
};
/**
 * Common export names for base infrastructure resources (imported)
 */
exports.BASE_EXPORT_NAMES = {
    VPC_ID: 'VPC-ID',
    VPC_CIDR_IPV4: 'VpcIPv4CIDR',
    SUBNET_PRIVATE_A: 'SubnetPrivateA',
    SUBNET_PRIVATE_B: 'SubnetPrivateB',
    SUBNET_PUBLIC_A: 'SubnetPublicA',
    SUBNET_PUBLIC_B: 'SubnetPublicB',
    ECS_CLUSTER: 'Ecs-ARN',
    ECR_REPO: 'Ecr-ARN',
    KMS_KEY: 'Kms-ARN',
    S3_BUCKET: 'S3ConfBucket-ARN',
    CERTIFICATE_ARN: 'AcmCert-ARN',
    HOSTED_ZONE_ID: 'R53Zone-ID',
};
/**
 * Helper to create CloudFormation Fn::Sub expression for dynamic export names
 * The StackName parameter contains the full stack name (e.g., "TAK-devtest-AuthInfra")
 * This function creates the export name: {StackName}-{resource}
 */
function createDynamicExportName(resourceType) {
    return `\${StackName}-${resourceType}`;
}
/**
 * Helper to create base infrastructure import value names
 * @param environment - Environment name (e.g. 'prod', 'dev', 'test', etc.)
 * @param exportName - The specific export name suffix
 * @returns Full import value reference for base infrastructure
 */
function createBaseImportValue(environment, exportName) {
    const baseStackName = generateStackName({
        project: exports.FIXED_STACK_CONFIG.PROJECT,
        environment,
        component: 'BaseInfra'
    });
    return `${baseStackName}-${exportName}`;
}
/**
 * Helper to create auth infrastructure import value names
 * @param environment - Environment name (e.g. 'prod', 'dev', 'test', etc.)
 * @param exportName - The specific export name suffix
 * @returns Full import value reference for auth infrastructure
 */
function createAuthImportValue(environment, exportName) {
    const authStackName = generateAuthInfraStackName(environment);
    return `${authStackName}-${exportName}`;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RhY2stbmFtaW5nLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsic3RhY2stbmFtaW5nLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTs7R0FFRzs7O0FBcUJILDhDQVlDO0FBT0QsZ0VBTUM7QUErQ0QsMERBRUM7QUFRRCxzREFPQztBQVFELHNEQUdDO0FBaEhEOztHQUVHO0FBQ1UsUUFBQSxrQkFBa0IsR0FBRztJQUNoQyxPQUFPLEVBQUUsS0FBSztJQUNkLFNBQVMsRUFBRSxXQUFXO0NBQ2QsQ0FBQztBQUVYOzs7R0FHRztBQUNILFNBQWdCLGlCQUFpQixDQUFDLE1BQXlCO0lBQ3pELE1BQU0sS0FBSyxHQUFHO1FBQ1osTUFBTSxDQUFDLE9BQU8sSUFBSSwwQkFBa0IsQ0FBQyxPQUFPO1FBQzVDLE1BQU0sQ0FBQyxXQUFXLElBQUksY0FBYyxFQUFHLHNDQUFzQztRQUM3RSxNQUFNLENBQUMsU0FBUyxJQUFJLDBCQUFrQixDQUFDLFNBQVM7S0FDakQsQ0FBQztJQUVGLElBQUksTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQ2xCLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQzVCLENBQUM7SUFFRCxPQUFPLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDekIsQ0FBQztBQUVEOzs7O0dBSUc7QUFDSCxTQUFnQiwwQkFBMEIsQ0FBQyxXQUFtQjtJQUM1RCxPQUFPLGlCQUFpQixDQUFDO1FBQ3ZCLE9BQU8sRUFBRSwwQkFBa0IsQ0FBQyxPQUFPO1FBQ25DLFdBQVc7UUFDWCxTQUFTLEVBQUUsMEJBQWtCLENBQUMsU0FBUztLQUN4QyxDQUFDLENBQUM7QUFDTCxDQUFDO0FBRUQ7O0dBRUc7QUFDVSxRQUFBLGlCQUFpQixHQUFHO0lBQy9CLGlCQUFpQixFQUFFLG1CQUFtQjtJQUN0QyxtQkFBbUIsRUFBRSxxQkFBcUI7SUFDMUMsY0FBYyxFQUFFLGdCQUFnQjtJQUNoQyxvQkFBb0IsRUFBRSxxQkFBcUI7SUFDM0MsTUFBTSxFQUFFLFFBQVE7SUFDaEIsc0JBQXNCLEVBQUUsdUJBQXVCO0lBQy9DLDBCQUEwQixFQUFFLDJCQUEyQjtJQUN2RCx3QkFBd0IsRUFBRSx5QkFBeUI7SUFDbkQseUJBQXlCLEVBQUUsMEJBQTBCO0lBQ3JELHdCQUF3QixFQUFFLHlCQUF5QjtJQUNuRCxpQkFBaUIsRUFBRSxtQkFBbUI7SUFDdEMsYUFBYSxFQUFFLGVBQWU7SUFDOUIsWUFBWSxFQUFFLGNBQWM7SUFDNUIsYUFBYSxFQUFFLGVBQWU7SUFDOUIsY0FBYyxFQUFFLGdCQUFnQjtJQUNoQywrQkFBK0IsRUFBRSxnQ0FBZ0M7Q0FDekQsQ0FBQztBQUVYOztHQUVHO0FBQ1UsUUFBQSxpQkFBaUIsR0FBRztJQUMvQixNQUFNLEVBQUUsUUFBUTtJQUNoQixhQUFhLEVBQUUsYUFBYTtJQUM1QixnQkFBZ0IsRUFBRSxnQkFBZ0I7SUFDbEMsZ0JBQWdCLEVBQUUsZ0JBQWdCO0lBQ2xDLGVBQWUsRUFBRSxlQUFlO0lBQ2hDLGVBQWUsRUFBRSxlQUFlO0lBQ2hDLFdBQVcsRUFBRSxTQUFTO0lBQ3RCLFFBQVEsRUFBRSxTQUFTO0lBQ25CLE9BQU8sRUFBRSxTQUFTO0lBQ2xCLFNBQVMsRUFBRSxrQkFBa0I7SUFDN0IsZUFBZSxFQUFFLGFBQWE7SUFDOUIsY0FBYyxFQUFFLFlBQVk7Q0FDcEIsQ0FBQztBQUVYOzs7O0dBSUc7QUFDSCxTQUFnQix1QkFBdUIsQ0FBQyxZQUFvQjtJQUMxRCxPQUFPLGlCQUFpQixZQUFZLEVBQUUsQ0FBQztBQUN6QyxDQUFDO0FBRUQ7Ozs7O0dBS0c7QUFDSCxTQUFnQixxQkFBcUIsQ0FBQyxXQUFtQixFQUFFLFVBQWtCO0lBQzNFLE1BQU0sYUFBYSxHQUFHLGlCQUFpQixDQUFDO1FBQ3RDLE9BQU8sRUFBRSwwQkFBa0IsQ0FBQyxPQUFPO1FBQ25DLFdBQVc7UUFDWCxTQUFTLEVBQUUsV0FBVztLQUN2QixDQUFDLENBQUM7SUFDSCxPQUFPLEdBQUcsYUFBYSxJQUFJLFVBQVUsRUFBRSxDQUFDO0FBQzFDLENBQUM7QUFFRDs7Ozs7R0FLRztBQUNILFNBQWdCLHFCQUFxQixDQUFDLFdBQW1CLEVBQUUsVUFBa0I7SUFDM0UsTUFBTSxhQUFhLEdBQUcsMEJBQTBCLENBQUMsV0FBVyxDQUFDLENBQUM7SUFDOUQsT0FBTyxHQUFHLGFBQWEsSUFBSSxVQUFVLEVBQUUsQ0FBQztBQUMxQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBVdGlsaXR5IGZ1bmN0aW9ucyBmb3IgY29uc2lzdGVudCBzdGFjayBuYW1pbmcgYWNyb3NzIHRoZSBhcHBsaWNhdGlvblxuICovXG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RhY2tOYW1pbmdDb25maWcge1xuICBwcm9qZWN0Pzogc3RyaW5nO1xuICBlbnZpcm9ubWVudD86IHN0cmluZztcbiAgY29tcG9uZW50Pzogc3RyaW5nO1xuICBzdWZmaXg/OiBzdHJpbmc7XG59XG5cbi8qKlxuICogRml4ZWQgY29uZmlndXJhdGlvbiBmb3IgdGhlIG9yZ2FuaXphdGlvblxuICovXG5leHBvcnQgY29uc3QgRklYRURfU1RBQ0tfQ09ORklHID0ge1xuICBQUk9KRUNUOiAnVEFLJyxcbiAgQ09NUE9ORU5UOiAnQXV0aEluZnJhJ1xufSBhcyBjb25zdDtcblxuLyoqXG4gKiBHZW5lcmF0ZSBhIGNvbnNpc3RlbnQgc3RhY2sgbmFtZSBiYXNlZCBvbiBjb25maWd1cmF0aW9uXG4gKiBAcGFyYW0gY29uZmlnLmVudmlyb25tZW50IC0gVGhlIGVudmlyb25tZW50L2RlcGxveW1lbnQgaWRlbnRpZmllciAoZnJvbSBzdGFja05hbWUgaW4gY29uZmlnKVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVTdGFja05hbWUoY29uZmlnOiBTdGFja05hbWluZ0NvbmZpZyk6IHN0cmluZyB7XG4gIGNvbnN0IHBhcnRzID0gW1xuICAgIGNvbmZpZy5wcm9qZWN0IHx8IEZJWEVEX1NUQUNLX0NPTkZJRy5QUk9KRUNULFxuICAgIGNvbmZpZy5lbnZpcm9ubWVudCB8fCAnTXlGaXJzdFN0YWNrJywgIC8vIFRoaXMgY29tZXMgZnJvbSBzdGFja05hbWUgaW4gY29uZmlnXG4gICAgY29uZmlnLmNvbXBvbmVudCB8fCBGSVhFRF9TVEFDS19DT05GSUcuQ09NUE9ORU5UXG4gIF07XG4gIFxuICBpZiAoY29uZmlnLnN1ZmZpeCkge1xuICAgIHBhcnRzLnB1c2goY29uZmlnLnN1ZmZpeCk7XG4gIH1cbiAgXG4gIHJldHVybiBwYXJ0cy5qb2luKCctJyk7XG59XG5cbi8qKlxuICogR2VuZXJhdGUgY29uc2lzdGVudCBzdGFjayBuYW1lIGZvciB0aGUgQXV0aCBJbmZyYSBzdGFja1xuICogQHBhcmFtIGVudmlyb25tZW50IC0gRW52aXJvbm1lbnQgbmFtZSAoZS5nLiAncHJvZCcsICdkZXYnLCAndGVzdCcsIGV0Yy4pXG4gKiBAcmV0dXJucyBGdWxsIHN0YWNrIG5hbWUgZm9yIHRoZSBhdXRoIGluZnJhc3RydWN0dXJlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZUF1dGhJbmZyYVN0YWNrTmFtZShlbnZpcm9ubWVudDogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIGdlbmVyYXRlU3RhY2tOYW1lKHtcbiAgICBwcm9qZWN0OiBGSVhFRF9TVEFDS19DT05GSUcuUFJPSkVDVCxcbiAgICBlbnZpcm9ubWVudCxcbiAgICBjb21wb25lbnQ6IEZJWEVEX1NUQUNLX0NPTkZJRy5DT01QT05FTlRcbiAgfSk7XG59XG5cbi8qKlxuICogQ29tbW9uIGV4cG9ydCBuYW1lcyBmb3IgYXV0aCBpbmZyYXN0cnVjdHVyZSByZXNvdXJjZXNcbiAqL1xuZXhwb3J0IGNvbnN0IEFVVEhfRVhQT1JUX05BTUVTID0ge1xuICBEQVRBQkFTRV9FTkRQT0lOVDogJ0RhdGFiYXNlLUVuZHBvaW50JyxcbiAgREFUQUJBU0VfU0VDUkVUX0FSTjogJ0RhdGFiYXNlLVNlY3JldC1BUk4nLFxuICBSRURJU19FTkRQT0lOVDogJ1JlZGlzLUVuZHBvaW50JyxcbiAgUkVESVNfQVVUSF9UT0tFTl9BUk46ICdSZWRpcy1BdXRoVG9rZW4tQVJOJyxcbiAgRUZTX0lEOiAnRUZTLUlEJyxcbiAgRUZTX01FRElBX0FDQ0VTU19QT0lOVDogJ0VGUy1NZWRpYS1BY2Nlc3NQb2ludCcsXG4gIEVGU19URU1QTEFURVNfQUNDRVNTX1BPSU5UOiAnRUZTLVRlbXBsYXRlcy1BY2Nlc3NQb2ludCcsXG4gIEFVVEhFTlRJS19TRUNSRVRfS0VZX0FSTjogJ0F1dGhlbnRpay1TZWNyZXRLZXktQVJOJyxcbiAgQVVUSEVOVElLX0FETUlOX1RPS0VOX0FSTjogJ0F1dGhlbnRpay1BZG1pblRva2VuLUFSTicsXG4gIEFVVEhFTlRJS19MREFQX1RPS0VOX0FSTjogJ0F1dGhlbnRpay1MZGFwVG9rZW4tQVJOJyxcbiAgQVVUSEVOVElLX0FMQl9ETlM6ICdBdXRoZW50aWstQUxCLUROUycsXG4gIEFVVEhFTlRJS19VUkw6ICdBdXRoZW50aWstVVJMJyxcbiAgTERBUF9BTEJfRE5TOiAnTERBUC1BTEItRE5TJyxcbiAgTERBUF9FTkRQT0lOVDogJ0xEQVAtRW5kcG9pbnQnLFxuICBMREFQU19FTkRQT0lOVDogJ0xEQVBTLUVuZHBvaW50JyxcbiAgTERBUF9UT0tFTl9SRVRSSUVWRVJfTEFNQkRBX0FSTjogJ0xEQVAtVG9rZW5SZXRyaWV2ZXItTGFtYmRhLUFSTidcbn0gYXMgY29uc3Q7XG5cbi8qKlxuICogQ29tbW9uIGV4cG9ydCBuYW1lcyBmb3IgYmFzZSBpbmZyYXN0cnVjdHVyZSByZXNvdXJjZXMgKGltcG9ydGVkKVxuICovXG5leHBvcnQgY29uc3QgQkFTRV9FWFBPUlRfTkFNRVMgPSB7XG4gIFZQQ19JRDogJ1ZQQy1JRCcsXG4gIFZQQ19DSURSX0lQVjQ6ICdWcGNJUHY0Q0lEUicsXG4gIFNVQk5FVF9QUklWQVRFX0E6ICdTdWJuZXRQcml2YXRlQScsXG4gIFNVQk5FVF9QUklWQVRFX0I6ICdTdWJuZXRQcml2YXRlQicsXG4gIFNVQk5FVF9QVUJMSUNfQTogJ1N1Ym5ldFB1YmxpY0EnLFxuICBTVUJORVRfUFVCTElDX0I6ICdTdWJuZXRQdWJsaWNCJyxcbiAgRUNTX0NMVVNURVI6ICdFY3MtQVJOJyxcbiAgRUNSX1JFUE86ICdFY3ItQVJOJyxcbiAgS01TX0tFWTogJ0ttcy1BUk4nLFxuICBTM19CVUNLRVQ6ICdTM0NvbmZCdWNrZXQtQVJOJyxcbiAgQ0VSVElGSUNBVEVfQVJOOiAnQWNtQ2VydC1BUk4nLFxuICBIT1NURURfWk9ORV9JRDogJ1I1M1pvbmUtSUQnLFxufSBhcyBjb25zdDtcblxuLyoqXG4gKiBIZWxwZXIgdG8gY3JlYXRlIENsb3VkRm9ybWF0aW9uIEZuOjpTdWIgZXhwcmVzc2lvbiBmb3IgZHluYW1pYyBleHBvcnQgbmFtZXNcbiAqIFRoZSBTdGFja05hbWUgcGFyYW1ldGVyIGNvbnRhaW5zIHRoZSBmdWxsIHN0YWNrIG5hbWUgKGUuZy4sIFwiVEFLLWRldnRlc3QtQXV0aEluZnJhXCIpXG4gKiBUaGlzIGZ1bmN0aW9uIGNyZWF0ZXMgdGhlIGV4cG9ydCBuYW1lOiB7U3RhY2tOYW1lfS17cmVzb3VyY2V9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVEeW5hbWljRXhwb3J0TmFtZShyZXNvdXJjZVR5cGU6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBgXFwke1N0YWNrTmFtZX0tJHtyZXNvdXJjZVR5cGV9YDtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gY3JlYXRlIGJhc2UgaW5mcmFzdHJ1Y3R1cmUgaW1wb3J0IHZhbHVlIG5hbWVzXG4gKiBAcGFyYW0gZW52aXJvbm1lbnQgLSBFbnZpcm9ubWVudCBuYW1lIChlLmcuICdwcm9kJywgJ2RldicsICd0ZXN0JywgZXRjLilcbiAqIEBwYXJhbSBleHBvcnROYW1lIC0gVGhlIHNwZWNpZmljIGV4cG9ydCBuYW1lIHN1ZmZpeFxuICogQHJldHVybnMgRnVsbCBpbXBvcnQgdmFsdWUgcmVmZXJlbmNlIGZvciBiYXNlIGluZnJhc3RydWN0dXJlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVCYXNlSW1wb3J0VmFsdWUoZW52aXJvbm1lbnQ6IHN0cmluZywgZXhwb3J0TmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3QgYmFzZVN0YWNrTmFtZSA9IGdlbmVyYXRlU3RhY2tOYW1lKHtcbiAgICBwcm9qZWN0OiBGSVhFRF9TVEFDS19DT05GSUcuUFJPSkVDVCxcbiAgICBlbnZpcm9ubWVudCxcbiAgICBjb21wb25lbnQ6ICdCYXNlSW5mcmEnXG4gIH0pO1xuICByZXR1cm4gYCR7YmFzZVN0YWNrTmFtZX0tJHtleHBvcnROYW1lfWA7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGNyZWF0ZSBhdXRoIGluZnJhc3RydWN0dXJlIGltcG9ydCB2YWx1ZSBuYW1lc1xuICogQHBhcmFtIGVudmlyb25tZW50IC0gRW52aXJvbm1lbnQgbmFtZSAoZS5nLiAncHJvZCcsICdkZXYnLCAndGVzdCcsIGV0Yy4pXG4gKiBAcGFyYW0gZXhwb3J0TmFtZSAtIFRoZSBzcGVjaWZpYyBleHBvcnQgbmFtZSBzdWZmaXhcbiAqIEByZXR1cm5zIEZ1bGwgaW1wb3J0IHZhbHVlIHJlZmVyZW5jZSBmb3IgYXV0aCBpbmZyYXN0cnVjdHVyZVxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQXV0aEltcG9ydFZhbHVlKGVudmlyb25tZW50OiBzdHJpbmcsIGV4cG9ydE5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IGF1dGhTdGFja05hbWUgPSBnZW5lcmF0ZUF1dGhJbmZyYVN0YWNrTmFtZShlbnZpcm9ubWVudCk7XG4gIHJldHVybiBgJHthdXRoU3RhY2tOYW1lfS0ke2V4cG9ydE5hbWV9YDtcbn1cbiJdfQ==