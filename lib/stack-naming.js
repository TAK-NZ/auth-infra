"use strict";
/**
 * Utility functions for consistent stack naming across the application
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.BASE_EXPORT_NAMES = exports.AUTH_EXPORT_NAMES = exports.FIXED_STACK_CONFIG = void 0;
exports.generateStackName = generateStackName;
exports.generateAuthInfraStackName = generateAuthInfraStackName;
exports.createDynamicExportName = createDynamicExportName;
exports.createBaseImportValue = createBaseImportValue;
exports.createAuthImportValue = createAuthImportValue;
/**
 * Fixed configuration for the organization
 */
exports.FIXED_STACK_CONFIG = {
    PROJECT: 'TAK',
    COMPONENT: 'AuthInfra'
};
/**
 * Generate a consistent stack name based on configuration
 * @param config.environment - The environment/deployment identifier (from stackName in config)
 */
function generateStackName(config) {
    const parts = [
        config.project || exports.FIXED_STACK_CONFIG.PROJECT,
        config.environment || 'MyFirstStack', // This comes from stackName in config
        config.component || exports.FIXED_STACK_CONFIG.COMPONENT
    ];
    if (config.suffix) {
        parts.push(config.suffix);
    }
    return parts.join('-');
}
/**
 * Generate consistent stack name for the Auth Infra stack
 * @param environment - Environment name (e.g. 'prod', 'dev', 'test', etc.)
 * @returns Full stack name for the auth infrastructure
 */
function generateAuthInfraStackName(environment) {
    return generateStackName({
        project: exports.FIXED_STACK_CONFIG.PROJECT,
        environment,
        component: exports.FIXED_STACK_CONFIG.COMPONENT
    });
}
/**
 * Common export names for auth infrastructure resources
 */
exports.AUTH_EXPORT_NAMES = {
    DATABASE_ENDPOINT: 'Database-Endpoint',
    DATABASE_SECRET_ARN: 'Database-Secret-ARN',
    REDIS_ENDPOINT: 'Redis-Endpoint',
    REDIS_AUTH_TOKEN_ARN: 'Redis-AuthToken-ARN',
    EFS_ID: 'EFS-ID',
    EFS_MEDIA_ACCESS_POINT: 'EFS-Media-AccessPoint',
    EFS_TEMPLATES_ACCESS_POINT: 'EFS-Templates-AccessPoint',
    AUTHENTIK_SECRET_KEY_ARN: 'Authentik-SecretKey-ARN',
    AUTHENTIK_ADMIN_TOKEN_ARN: 'Authentik-AdminToken-ARN',
    AUTHENTIK_LDAP_TOKEN_ARN: 'Authentik-LdapToken-ARN',
    AUTHENTIK_ALB_DNS: 'Authentik-ALB-DNS',
    AUTHENTIK_URL: 'Authentik-URL',
    LDAP_ALB_DNS: 'LDAP-ALB-DNS',
    LDAP_ENDPOINT: 'LDAP-Endpoint',
    LDAPS_ENDPOINT: 'LDAPS-Endpoint',
    LDAP_TOKEN_RETRIEVER_LAMBDA_ARN: 'LDAP-TokenRetriever-Lambda-ARN'
};
/**
 * Common export names for base infrastructure resources (imported)
 */
exports.BASE_EXPORT_NAMES = {
    VPC_ID: 'VPC-ID',
    VPC_CIDR_IPV4: 'VpcIPv4CIDR',
    VPC_CIDR_IPV6: 'VpcIPv6CIDR',
    SUBNET_PRIVATE_A: 'SubnetPrivateA',
    SUBNET_PRIVATE_B: 'SubnetPrivateB',
    SUBNET_PUBLIC_A: 'SubnetPublicA',
    SUBNET_PUBLIC_B: 'SubnetPublicB',
    ECS_CLUSTER: 'Ecs-ARN',
    ECR_REPO: 'Ecr-ARN',
    KMS_KEY: 'Kms-ARN',
    KMS_ALIAS: 'Kms-Alias',
    S3_BUCKET: 'S3ConfBucket-ARN',
    S3_ID: 'S3-ID',
    CERTIFICATE_ARN: 'AcmCert-ARN',
    HOSTED_ZONE_ID: 'R53Zone-ID',
};
/**
 * Helper to create CloudFormation Fn::Sub expression for dynamic export names
 * The StackName parameter contains the full stack name (e.g., "TAK-devtest-AuthInfra")
 * This function creates the export name: {StackName}-{resource}
 */
function createDynamicExportName(resourceType) {
    return `\${StackName}-${resourceType}`;
}
/**
 * Helper to create base infrastructure import value names
 * @param environment - Environment name (e.g. 'prod', 'dev', 'test', etc.)
 * @param exportName - The specific export name suffix
 * @returns Full import value reference for base infrastructure
 */
function createBaseImportValue(environment, exportName) {
    const baseStackName = generateStackName({
        project: exports.FIXED_STACK_CONFIG.PROJECT,
        environment,
        component: 'BaseInfra'
    });
    return `${baseStackName}-${exportName}`;
}
/**
 * Helper to create auth infrastructure import value names
 * @param environment - Environment name (e.g. 'prod', 'dev', 'test', etc.)
 * @param exportName - The specific export name suffix
 * @returns Full import value reference for auth infrastructure
 */
function createAuthImportValue(environment, exportName) {
    const authStackName = generateAuthInfraStackName(environment);
    return `${authStackName}-${exportName}`;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RhY2stbmFtaW5nLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsic3RhY2stbmFtaW5nLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTs7R0FFRzs7O0FBcUJILDhDQVlDO0FBT0QsZ0VBTUM7QUFrREQsMERBRUM7QUFRRCxzREFPQztBQVFELHNEQUdDO0FBbkhEOztHQUVHO0FBQ1UsUUFBQSxrQkFBa0IsR0FBRztJQUNoQyxPQUFPLEVBQUUsS0FBSztJQUNkLFNBQVMsRUFBRSxXQUFXO0NBQ2QsQ0FBQztBQUVYOzs7R0FHRztBQUNILFNBQWdCLGlCQUFpQixDQUFDLE1BQXlCO0lBQ3pELE1BQU0sS0FBSyxHQUFHO1FBQ1osTUFBTSxDQUFDLE9BQU8sSUFBSSwwQkFBa0IsQ0FBQyxPQUFPO1FBQzVDLE1BQU0sQ0FBQyxXQUFXLElBQUksY0FBYyxFQUFHLHNDQUFzQztRQUM3RSxNQUFNLENBQUMsU0FBUyxJQUFJLDBCQUFrQixDQUFDLFNBQVM7S0FDakQsQ0FBQztJQUVGLElBQUksTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQ2xCLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQzVCLENBQUM7SUFFRCxPQUFPLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDekIsQ0FBQztBQUVEOzs7O0dBSUc7QUFDSCxTQUFnQiwwQkFBMEIsQ0FBQyxXQUFtQjtJQUM1RCxPQUFPLGlCQUFpQixDQUFDO1FBQ3ZCLE9BQU8sRUFBRSwwQkFBa0IsQ0FBQyxPQUFPO1FBQ25DLFdBQVc7UUFDWCxTQUFTLEVBQUUsMEJBQWtCLENBQUMsU0FBUztLQUN4QyxDQUFDLENBQUM7QUFDTCxDQUFDO0FBRUQ7O0dBRUc7QUFDVSxRQUFBLGlCQUFpQixHQUFHO0lBQy9CLGlCQUFpQixFQUFFLG1CQUFtQjtJQUN0QyxtQkFBbUIsRUFBRSxxQkFBcUI7SUFDMUMsY0FBYyxFQUFFLGdCQUFnQjtJQUNoQyxvQkFBb0IsRUFBRSxxQkFBcUI7SUFDM0MsTUFBTSxFQUFFLFFBQVE7SUFDaEIsc0JBQXNCLEVBQUUsdUJBQXVCO0lBQy9DLDBCQUEwQixFQUFFLDJCQUEyQjtJQUN2RCx3QkFBd0IsRUFBRSx5QkFBeUI7SUFDbkQseUJBQXlCLEVBQUUsMEJBQTBCO0lBQ3JELHdCQUF3QixFQUFFLHlCQUF5QjtJQUNuRCxpQkFBaUIsRUFBRSxtQkFBbUI7SUFDdEMsYUFBYSxFQUFFLGVBQWU7SUFDOUIsWUFBWSxFQUFFLGNBQWM7SUFDNUIsYUFBYSxFQUFFLGVBQWU7SUFDOUIsY0FBYyxFQUFFLGdCQUFnQjtJQUNoQywrQkFBK0IsRUFBRSxnQ0FBZ0M7Q0FDekQsQ0FBQztBQUVYOztHQUVHO0FBQ1UsUUFBQSxpQkFBaUIsR0FBRztJQUMvQixNQUFNLEVBQUUsUUFBUTtJQUNoQixhQUFhLEVBQUUsYUFBYTtJQUM1QixhQUFhLEVBQUUsYUFBYTtJQUM1QixnQkFBZ0IsRUFBRSxnQkFBZ0I7SUFDbEMsZ0JBQWdCLEVBQUUsZ0JBQWdCO0lBQ2xDLGVBQWUsRUFBRSxlQUFlO0lBQ2hDLGVBQWUsRUFBRSxlQUFlO0lBQ2hDLFdBQVcsRUFBRSxTQUFTO0lBQ3RCLFFBQVEsRUFBRSxTQUFTO0lBQ25CLE9BQU8sRUFBRSxTQUFTO0lBQ2xCLFNBQVMsRUFBRSxXQUFXO0lBQ3RCLFNBQVMsRUFBRSxrQkFBa0I7SUFDN0IsS0FBSyxFQUFFLE9BQU87SUFDZCxlQUFlLEVBQUUsYUFBYTtJQUM5QixjQUFjLEVBQUUsWUFBWTtDQUNwQixDQUFDO0FBRVg7Ozs7R0FJRztBQUNILFNBQWdCLHVCQUF1QixDQUFDLFlBQW9CO0lBQzFELE9BQU8saUJBQWlCLFlBQVksRUFBRSxDQUFDO0FBQ3pDLENBQUM7QUFFRDs7Ozs7R0FLRztBQUNILFNBQWdCLHFCQUFxQixDQUFDLFdBQW1CLEVBQUUsVUFBa0I7SUFDM0UsTUFBTSxhQUFhLEdBQUcsaUJBQWlCLENBQUM7UUFDdEMsT0FBTyxFQUFFLDBCQUFrQixDQUFDLE9BQU87UUFDbkMsV0FBVztRQUNYLFNBQVMsRUFBRSxXQUFXO0tBQ3ZCLENBQUMsQ0FBQztJQUNILE9BQU8sR0FBRyxhQUFhLElBQUksVUFBVSxFQUFFLENBQUM7QUFDMUMsQ0FBQztBQUVEOzs7OztHQUtHO0FBQ0gsU0FBZ0IscUJBQXFCLENBQUMsV0FBbUIsRUFBRSxVQUFrQjtJQUMzRSxNQUFNLGFBQWEsR0FBRywwQkFBMEIsQ0FBQyxXQUFXLENBQUMsQ0FBQztJQUM5RCxPQUFPLEdBQUcsYUFBYSxJQUFJLFVBQVUsRUFBRSxDQUFDO0FBQzFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFV0aWxpdHkgZnVuY3Rpb25zIGZvciBjb25zaXN0ZW50IHN0YWNrIG5hbWluZyBhY3Jvc3MgdGhlIGFwcGxpY2F0aW9uXG4gKi9cblxuZXhwb3J0IGludGVyZmFjZSBTdGFja05hbWluZ0NvbmZpZyB7XG4gIHByb2plY3Q/OiBzdHJpbmc7XG4gIGVudmlyb25tZW50Pzogc3RyaW5nO1xuICBjb21wb25lbnQ/OiBzdHJpbmc7XG4gIHN1ZmZpeD86IHN0cmluZztcbn1cblxuLyoqXG4gKiBGaXhlZCBjb25maWd1cmF0aW9uIGZvciB0aGUgb3JnYW5pemF0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCBGSVhFRF9TVEFDS19DT05GSUcgPSB7XG4gIFBST0pFQ1Q6ICdUQUsnLFxuICBDT01QT05FTlQ6ICdBdXRoSW5mcmEnXG59IGFzIGNvbnN0O1xuXG4vKipcbiAqIEdlbmVyYXRlIGEgY29uc2lzdGVudCBzdGFjayBuYW1lIGJhc2VkIG9uIGNvbmZpZ3VyYXRpb25cbiAqIEBwYXJhbSBjb25maWcuZW52aXJvbm1lbnQgLSBUaGUgZW52aXJvbm1lbnQvZGVwbG95bWVudCBpZGVudGlmaWVyIChmcm9tIHN0YWNrTmFtZSBpbiBjb25maWcpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVN0YWNrTmFtZShjb25maWc6IFN0YWNrTmFtaW5nQ29uZmlnKTogc3RyaW5nIHtcbiAgY29uc3QgcGFydHMgPSBbXG4gICAgY29uZmlnLnByb2plY3QgfHwgRklYRURfU1RBQ0tfQ09ORklHLlBST0pFQ1QsXG4gICAgY29uZmlnLmVudmlyb25tZW50IHx8ICdNeUZpcnN0U3RhY2snLCAgLy8gVGhpcyBjb21lcyBmcm9tIHN0YWNrTmFtZSBpbiBjb25maWdcbiAgICBjb25maWcuY29tcG9uZW50IHx8IEZJWEVEX1NUQUNLX0NPTkZJRy5DT01QT05FTlRcbiAgXTtcbiAgXG4gIGlmIChjb25maWcuc3VmZml4KSB7XG4gICAgcGFydHMucHVzaChjb25maWcuc3VmZml4KTtcbiAgfVxuICBcbiAgcmV0dXJuIHBhcnRzLmpvaW4oJy0nKTtcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZSBjb25zaXN0ZW50IHN0YWNrIG5hbWUgZm9yIHRoZSBBdXRoIEluZnJhIHN0YWNrXG4gKiBAcGFyYW0gZW52aXJvbm1lbnQgLSBFbnZpcm9ubWVudCBuYW1lIChlLmcuICdwcm9kJywgJ2RldicsICd0ZXN0JywgZXRjLilcbiAqIEByZXR1cm5zIEZ1bGwgc3RhY2sgbmFtZSBmb3IgdGhlIGF1dGggaW5mcmFzdHJ1Y3R1cmVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlQXV0aEluZnJhU3RhY2tOYW1lKGVudmlyb25tZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gZ2VuZXJhdGVTdGFja05hbWUoe1xuICAgIHByb2plY3Q6IEZJWEVEX1NUQUNLX0NPTkZJRy5QUk9KRUNULFxuICAgIGVudmlyb25tZW50LFxuICAgIGNvbXBvbmVudDogRklYRURfU1RBQ0tfQ09ORklHLkNPTVBPTkVOVFxuICB9KTtcbn1cblxuLyoqXG4gKiBDb21tb24gZXhwb3J0IG5hbWVzIGZvciBhdXRoIGluZnJhc3RydWN0dXJlIHJlc291cmNlc1xuICovXG5leHBvcnQgY29uc3QgQVVUSF9FWFBPUlRfTkFNRVMgPSB7XG4gIERBVEFCQVNFX0VORFBPSU5UOiAnRGF0YWJhc2UtRW5kcG9pbnQnLFxuICBEQVRBQkFTRV9TRUNSRVRfQVJOOiAnRGF0YWJhc2UtU2VjcmV0LUFSTicsXG4gIFJFRElTX0VORFBPSU5UOiAnUmVkaXMtRW5kcG9pbnQnLFxuICBSRURJU19BVVRIX1RPS0VOX0FSTjogJ1JlZGlzLUF1dGhUb2tlbi1BUk4nLFxuICBFRlNfSUQ6ICdFRlMtSUQnLFxuICBFRlNfTUVESUFfQUNDRVNTX1BPSU5UOiAnRUZTLU1lZGlhLUFjY2Vzc1BvaW50JyxcbiAgRUZTX1RFTVBMQVRFU19BQ0NFU1NfUE9JTlQ6ICdFRlMtVGVtcGxhdGVzLUFjY2Vzc1BvaW50JyxcbiAgQVVUSEVOVElLX1NFQ1JFVF9LRVlfQVJOOiAnQXV0aGVudGlrLVNlY3JldEtleS1BUk4nLFxuICBBVVRIRU5USUtfQURNSU5fVE9LRU5fQVJOOiAnQXV0aGVudGlrLUFkbWluVG9rZW4tQVJOJyxcbiAgQVVUSEVOVElLX0xEQVBfVE9LRU5fQVJOOiAnQXV0aGVudGlrLUxkYXBUb2tlbi1BUk4nLFxuICBBVVRIRU5USUtfQUxCX0ROUzogJ0F1dGhlbnRpay1BTEItRE5TJyxcbiAgQVVUSEVOVElLX1VSTDogJ0F1dGhlbnRpay1VUkwnLFxuICBMREFQX0FMQl9ETlM6ICdMREFQLUFMQi1ETlMnLFxuICBMREFQX0VORFBPSU5UOiAnTERBUC1FbmRwb2ludCcsXG4gIExEQVBTX0VORFBPSU5UOiAnTERBUFMtRW5kcG9pbnQnLFxuICBMREFQX1RPS0VOX1JFVFJJRVZFUl9MQU1CREFfQVJOOiAnTERBUC1Ub2tlblJldHJpZXZlci1MYW1iZGEtQVJOJ1xufSBhcyBjb25zdDtcblxuLyoqXG4gKiBDb21tb24gZXhwb3J0IG5hbWVzIGZvciBiYXNlIGluZnJhc3RydWN0dXJlIHJlc291cmNlcyAoaW1wb3J0ZWQpXG4gKi9cbmV4cG9ydCBjb25zdCBCQVNFX0VYUE9SVF9OQU1FUyA9IHtcbiAgVlBDX0lEOiAnVlBDLUlEJyxcbiAgVlBDX0NJRFJfSVBWNDogJ1ZwY0lQdjRDSURSJyxcbiAgVlBDX0NJRFJfSVBWNjogJ1ZwY0lQdjZDSURSJyxcbiAgU1VCTkVUX1BSSVZBVEVfQTogJ1N1Ym5ldFByaXZhdGVBJyxcbiAgU1VCTkVUX1BSSVZBVEVfQjogJ1N1Ym5ldFByaXZhdGVCJyxcbiAgU1VCTkVUX1BVQkxJQ19BOiAnU3VibmV0UHVibGljQScsXG4gIFNVQk5FVF9QVUJMSUNfQjogJ1N1Ym5ldFB1YmxpY0InLFxuICBFQ1NfQ0xVU1RFUjogJ0Vjcy1BUk4nLFxuICBFQ1JfUkVQTzogJ0Vjci1BUk4nLFxuICBLTVNfS0VZOiAnS21zLUFSTicsXG4gIEtNU19BTElBUzogJ0ttcy1BbGlhcycsXG4gIFMzX0JVQ0tFVDogJ1MzQ29uZkJ1Y2tldC1BUk4nLFxuICBTM19JRDogJ1MzLUlEJyxcbiAgQ0VSVElGSUNBVEVfQVJOOiAnQWNtQ2VydC1BUk4nLFxuICBIT1NURURfWk9ORV9JRDogJ1I1M1pvbmUtSUQnLFxufSBhcyBjb25zdDtcblxuLyoqXG4gKiBIZWxwZXIgdG8gY3JlYXRlIENsb3VkRm9ybWF0aW9uIEZuOjpTdWIgZXhwcmVzc2lvbiBmb3IgZHluYW1pYyBleHBvcnQgbmFtZXNcbiAqIFRoZSBTdGFja05hbWUgcGFyYW1ldGVyIGNvbnRhaW5zIHRoZSBmdWxsIHN0YWNrIG5hbWUgKGUuZy4sIFwiVEFLLWRldnRlc3QtQXV0aEluZnJhXCIpXG4gKiBUaGlzIGZ1bmN0aW9uIGNyZWF0ZXMgdGhlIGV4cG9ydCBuYW1lOiB7U3RhY2tOYW1lfS17cmVzb3VyY2V9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVEeW5hbWljRXhwb3J0TmFtZShyZXNvdXJjZVR5cGU6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBgXFwke1N0YWNrTmFtZX0tJHtyZXNvdXJjZVR5cGV9YDtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gY3JlYXRlIGJhc2UgaW5mcmFzdHJ1Y3R1cmUgaW1wb3J0IHZhbHVlIG5hbWVzXG4gKiBAcGFyYW0gZW52aXJvbm1lbnQgLSBFbnZpcm9ubWVudCBuYW1lIChlLmcuICdwcm9kJywgJ2RldicsICd0ZXN0JywgZXRjLilcbiAqIEBwYXJhbSBleHBvcnROYW1lIC0gVGhlIHNwZWNpZmljIGV4cG9ydCBuYW1lIHN1ZmZpeFxuICogQHJldHVybnMgRnVsbCBpbXBvcnQgdmFsdWUgcmVmZXJlbmNlIGZvciBiYXNlIGluZnJhc3RydWN0dXJlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVCYXNlSW1wb3J0VmFsdWUoZW52aXJvbm1lbnQ6IHN0cmluZywgZXhwb3J0TmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3QgYmFzZVN0YWNrTmFtZSA9IGdlbmVyYXRlU3RhY2tOYW1lKHtcbiAgICBwcm9qZWN0OiBGSVhFRF9TVEFDS19DT05GSUcuUFJPSkVDVCxcbiAgICBlbnZpcm9ubWVudCxcbiAgICBjb21wb25lbnQ6ICdCYXNlSW5mcmEnXG4gIH0pO1xuICByZXR1cm4gYCR7YmFzZVN0YWNrTmFtZX0tJHtleHBvcnROYW1lfWA7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGNyZWF0ZSBhdXRoIGluZnJhc3RydWN0dXJlIGltcG9ydCB2YWx1ZSBuYW1lc1xuICogQHBhcmFtIGVudmlyb25tZW50IC0gRW52aXJvbm1lbnQgbmFtZSAoZS5nLiAncHJvZCcsICdkZXYnLCAndGVzdCcsIGV0Yy4pXG4gKiBAcGFyYW0gZXhwb3J0TmFtZSAtIFRoZSBzcGVjaWZpYyBleHBvcnQgbmFtZSBzdWZmaXhcbiAqIEByZXR1cm5zIEZ1bGwgaW1wb3J0IHZhbHVlIHJlZmVyZW5jZSBmb3IgYXV0aCBpbmZyYXN0cnVjdHVyZVxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQXV0aEltcG9ydFZhbHVlKGVudmlyb25tZW50OiBzdHJpbmcsIGV4cG9ydE5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IGF1dGhTdGFja05hbWUgPSBnZW5lcmF0ZUF1dGhJbmZyYVN0YWNrTmFtZShlbnZpcm9ubWVudCk7XG4gIHJldHVybiBgJHthdXRoU3RhY2tOYW1lfS0ke2V4cG9ydE5hbWV9YDtcbn1cbiJdfQ==