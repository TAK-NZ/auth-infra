"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.PROD_CONFIG = exports.DEV_TEST_CONFIG = void 0;
exports.getEnvironmentConfig = getEnvironmentConfig;
exports.mergeEnvironmentConfig = mergeEnvironmentConfig;
/**
 * Environment-specific configuration for auth infrastructure resources
 */
const cdk = __importStar(require("aws-cdk-lib"));
/**
 * Development/Test environment configuration
 * Optimized for cost and development workflow
 */
exports.DEV_TEST_CONFIG = {
    database: {
        instanceClass: 'db.serverless', // Aurora Serverless v2 for cost optimization
        instanceCount: 1, // Single instance for dev/test
        backupRetentionDays: 1, // Minimal backup retention
        deletionProtection: false, // Allow deletion for dev/test
        enablePerformanceInsights: false, // Disable to save costs
        enableMonitoring: false, // Disable enhanced monitoring
    },
    redis: {
        nodeType: 'cache.t4g.micro', // Smallest instance for cost optimization
        numCacheClusters: 1, // Single cluster
        automaticFailoverEnabled: false, // Disable failover for cost savings
    },
    ecs: {
        taskCpu: 512, // Minimal CPU allocation
        taskMemory: 1024, // Minimal memory allocation
        desiredCount: 1, // Single server instance
        minCapacity: 1, // Minimum scaling capacity
        maxCapacity: 3, // Limited scaling for cost control
        workerDesiredCount: 1, // Single worker instance
        workerMinCapacity: 1, // Minimum worker capacity
        workerMaxCapacity: 2, // Limited worker scaling
    },
    efs: {
        throughputMode: 'bursting', // Bursting mode for cost optimization
        removalPolicy: cdk.RemovalPolicy.DESTROY, // Delete EFS in dev/test environments
    },
    general: {
        removalPolicy: cdk.RemovalPolicy.DESTROY, // Allow resource deletion
        enableDetailedLogging: true, // Keep logging for debugging
    },
    monitoring: {
        enableCloudWatchAlarms: false, // Disable alarms to save costs
        logRetentionDays: 7, // Short retention for cost savings
    },
};
/**
 * Production environment configuration
 * Optimized for high availability, security, and production workloads
 */
exports.PROD_CONFIG = {
    database: {
        instanceClass: 'db.t4g.large', // Larger instance for production workloads
        instanceCount: 2, // Multi-AZ deployment for high availability
        backupRetentionDays: 7, // Extended backup retention
        deletionProtection: true, // Protect production data
        enablePerformanceInsights: true, // Enable performance monitoring
        enableMonitoring: true, // Enable enhanced monitoring
    },
    redis: {
        nodeType: 'cache.t4g.small', // Adequate size for production
        numCacheClusters: 2, // Multi-node for high availability
        automaticFailoverEnabled: true, // Enable automatic failover
    },
    ecs: {
        taskCpu: 1024, // Higher CPU for production performance
        taskMemory: 2048, // Higher memory for production performance
        desiredCount: 2, // Multiple instances for availability
        minCapacity: 2, // Minimum production capacity
        maxCapacity: 6, // Higher scaling limits
        workerDesiredCount: 2, // Multiple worker instances
        workerMinCapacity: 1, // Minimum worker capacity
        workerMaxCapacity: 4, // Higher worker scaling limits
    },
    efs: {
        throughputMode: 'bursting', // Bursting mode for most workloads
        removalPolicy: cdk.RemovalPolicy.RETAIN, // Retain EFS in production environments
    },
    general: {
        removalPolicy: cdk.RemovalPolicy.RETAIN, // Protect production resources
        enableDetailedLogging: true, // Enable detailed logging
    },
    monitoring: {
        enableCloudWatchAlarms: true, // Enable production monitoring
        logRetentionDays: 30, // Extended log retention
    },
};
/**
 * Get environment configuration based on environment type
 */
function getEnvironmentConfig(envType) {
    switch (envType.toLowerCase()) {
        case 'prod':
        case 'production':
            return exports.PROD_CONFIG;
        case 'dev':
        case 'dev-test':
        case 'development':
        default:
            return exports.DEV_TEST_CONFIG;
    }
}
/**
 * Merge environment config with custom overrides
 * Allows fine-grained control over individual settings
 */
function mergeEnvironmentConfig(baseConfig, overrides) {
    return {
        database: { ...baseConfig.database, ...overrides.database },
        redis: { ...baseConfig.redis, ...overrides.redis },
        ecs: { ...baseConfig.ecs, ...overrides.ecs },
        efs: { ...baseConfig.efs, ...overrides.efs },
        general: { ...baseConfig.general, ...overrides.general },
        monitoring: { ...baseConfig.monitoring, ...overrides.monitoring },
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZW52aXJvbm1lbnQtY29uZmlnLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiZW52aXJvbm1lbnQtY29uZmlnLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBaUpBLG9EQVdDO0FBTUQsd0RBbUJDO0FBckxEOztHQUVHO0FBQ0gsaURBQW1DO0FBdURuQzs7O0dBR0c7QUFDVSxRQUFBLGVBQWUsR0FBK0I7SUFDekQsUUFBUSxFQUFFO1FBQ1IsYUFBYSxFQUFFLGVBQWUsRUFBTyw2Q0FBNkM7UUFDbEYsYUFBYSxFQUFFLENBQUMsRUFBcUIsK0JBQStCO1FBQ3BFLG1CQUFtQixFQUFFLENBQUMsRUFBZSwyQkFBMkI7UUFDaEUsa0JBQWtCLEVBQUUsS0FBSyxFQUFZLDhCQUE4QjtRQUNuRSx5QkFBeUIsRUFBRSxLQUFLLEVBQUssd0JBQXdCO1FBQzdELGdCQUFnQixFQUFFLEtBQUssRUFBYyw4QkFBOEI7S0FDcEU7SUFDRCxLQUFLLEVBQUU7UUFDTCxRQUFRLEVBQUUsaUJBQWlCLEVBQVUsMENBQTBDO1FBQy9FLGdCQUFnQixFQUFFLENBQUMsRUFBa0IsaUJBQWlCO1FBQ3RELHdCQUF3QixFQUFFLEtBQUssRUFBTSxvQ0FBb0M7S0FDMUU7SUFDRCxHQUFHLEVBQUU7UUFDSCxPQUFPLEVBQUUsR0FBRyxFQUF5Qix5QkFBeUI7UUFDOUQsVUFBVSxFQUFFLElBQUksRUFBcUIsNEJBQTRCO1FBQ2pFLFlBQVksRUFBRSxDQUFDLEVBQXNCLHlCQUF5QjtRQUM5RCxXQUFXLEVBQUUsQ0FBQyxFQUF1QiwyQkFBMkI7UUFDaEUsV0FBVyxFQUFFLENBQUMsRUFBdUIsbUNBQW1DO1FBQ3hFLGtCQUFrQixFQUFFLENBQUMsRUFBZ0IseUJBQXlCO1FBQzlELGlCQUFpQixFQUFFLENBQUMsRUFBaUIsMEJBQTBCO1FBQy9ELGlCQUFpQixFQUFFLENBQUMsRUFBaUIseUJBQXlCO0tBQy9EO0lBQ0QsR0FBRyxFQUFFO1FBQ0gs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QVMsQ0FBQyxHQUFHLEVBQUU7UUFDNUMsR0FBRyxFQUFFLEVBQUUsR0FBRyxVQUFVLENBQUMsR0FBRyxFQUFFLEdBQUcsU0FBUyxDQUFDLEdBQUcsRUFBRTtRQUM1QyxPQUFPLEVBQUUsRUFBRSxHQUFHLFVBQVUsQ0FBQyxPQUFPLEVBQUUsR0FBRyxTQUFTLENBQUMsT0FBTyxFQUFFO1FBQ3hELFVBQVUsRUFBRSxFQUFFLEdBQUcsVUFBVSxDQUFDLFVBQVUsRUFBRSxHQUFHLFNBQVMsQ0FBQyxVQUFVLEVBQUU7S0FDbEUsQ0FBQztBQUNKLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEVudmlyb25tZW50LXNwZWNpZmljIGNvbmZpZ3VyYXRpb24gZm9yIGF1dGggaW5mcmFzdHJ1Y3R1cmUgcmVzb3VyY2VzXG4gKi9cbmltcG9ydCAqIGFzIGNkayBmcm9tICdhd3MtY2RrLWxpYic7XG5cbi8qKlxuICogRW52aXJvbm1lbnQtc3BlY2lmaWMgY29uZmlndXJhdGlvbiBmb3IgYXV0aCBpbmZyYXN0cnVjdHVyZSByZXNvdXJjZXNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBBdXRoSW5mcmFFbnZpcm9ubWVudENvbmZpZyB7XG4gIC8vIERhdGFiYXNlIGNvbmZpZ3VyYXRpb25cbiAgZGF0YWJhc2U6IHtcbiAgICBpbnN0YW5jZUNsYXNzOiBzdHJpbmc7ICAgICAgICAgICAgICAgIC8vIFJEUyBpbnN0YW5jZSBjbGFzcyAoZS5nLiwgJ2RiLnNlcnZlcmxlc3MnLCAnZGIudDRnLmxhcmdlJylcbiAgICBpbnN0YW5jZUNvdW50OiBudW1iZXI7ICAgICAgICAgICAgICAgIC8vIE51bWJlciBvZiBkYXRhYmFzZSBpbnN0YW5jZXNcbiAgICBiYWNrdXBSZXRlbnRpb25EYXlzOiBudW1iZXI7ICAgICAgICAgIC8vIEJhY2t1cCByZXRlbnRpb24gcGVyaW9kIGluIGRheXNcbiAgICBkZWxldGlvblByb3RlY3Rpb246IGJvb2xlYW47ICAgICAgICAgIC8vIEVuYWJsZSBkZWxldGlvbiBwcm90ZWN0aW9uXG4gICAgZW5hYmxlUGVyZm9ybWFuY2VJbnNpZ2h0czogYm9vbGVhbjsgICAvLyBFbmFibGUgUkRTIFBlcmZvcm1hbmNlIEluc2lnaHRzXG4gICAgZW5hYmxlTW9uaXRvcmluZzogYm9vbGVhbjsgICAgICAgICAgICAvLyBFbmFibGUgZW5oYW5jZWQgbW9uaXRvcmluZ1xuICB9O1xuICBcbiAgLy8gUmVkaXMgY29uZmlndXJhdGlvblxuICByZWRpczoge1xuICAgIG5vZGVUeXBlOiBzdHJpbmc7ICAgICAgICAgICAgICAgICAgICAgLy8gRWxhc3RpQ2FjaGUgbm9kZSB0eXBlXG4gICAgbnVtQ2FjaGVDbHVzdGVyczogbnVtYmVyOyAgICAgICAgICAgICAvLyBOdW1iZXIgb2YgY2FjaGUgY2x1c3RlcnNcbiAgICBhdXRvbWF0aWNGYWlsb3ZlckVuYWJsZWQ6IGJvb2xlYW47ICAgIC8vIEVuYWJsZSBhdXRvbWF0aWMgZmFpbG92ZXJcbiAgfTtcbiAgXG4gIC8vIEVDUyBjb25maWd1cmF0aW9uXG4gIGVjczoge1xuICAgIHRhc2tDcHU6IG51bWJlcjsgICAgICAgICAgICAgICAgICAgICAgLy8gQ1BVIHVuaXRzIGZvciBFQ1MgdGFza3NcbiAgICB0YXNrTWVtb3J5OiBudW1iZXI7ICAgICAgICAgICAgICAgICAgIC8vIE1lbW9yeSAoTUIpIGZvciBFQ1MgdGFza3NcbiAgICBkZXNpcmVkQ291bnQ6IG51bWJlcjsgICAgICAgICAgICAgICAgIC8vIERlc2lyZWQgbnVtYmVyIG9mIHNlcnZlciB0YXNrc1xuICAgIG1pbkNhcGFjaXR5OiBudW1iZXI7ICAgICAgICAgICAgICAgICAgLy8gTWluaW11bSBjYXBhY2l0eSBmb3IgYXV0byBzY2FsaW5nXG4gICAgbWF4Q2FwYWNpdHk6IG51bWJlcjsgICAgICAgICAgICAgICAgICAvLyBNYXhpbXVtIGNhcGFjaXR5IGZvciBhdXRvIHNjYWxpbmdcbiAgICB3b3JrZXJEZXNpcmVkQ291bnQ/OiBudW1iZXI7ICAgICAgICAgIC8vIERlc2lyZWQgbnVtYmVyIG9mIHdvcmtlciB0YXNrc1xuICAgIHdvcmtlck1pbkNhcGFjaXR5PzogbnVtYmVyOyAgICAgICAgICAgLy8gTWluaW11bSB3b3JrZXIgY2FwYWNpdHlcbiAgICB3b3JrZXJNYXhDYXBhY2l0eT86IG51bWJlcjsgICAgICAgICAgIC8vIE1heGltdW0gd29ya2VyIGNhcGFjaXR5XG4gIH07XG4gIFxuICAvLyBFRlMgY29uZmlndXJhdGlvblxuICBlZnM6IHtcbiAgICB0aHJvdWdocHV0TW9kZTogJ2J1cnN0aW5nJyB8ICdwcm92aXNpb25lZCc7ICAvLyBFRlMgdGhyb3VnaHB1dCBtb2RlXG4gICAgcHJvdmlzaW9uZWRUaHJvdWdocHV0PzogbnVtYmVyOyAgICAgICAgICAgICAgIC8vIFByb3Zpc2lvbmVkIHRocm91Z2hwdXQgKE1CL3MpXG4gICAgcmVtb3ZhbFBvbGljeTogY2RrLlJlbW92YWxQb2xpY3k7ICAgICAgICAgICAgLy8gRUZTIGZpbGUgc3lzdGVtIHJlbW92YWwgcG9saWN5XG4gIH07XG5cbiAgLy8gR2VuZXJhbCBpbmZyYXN0cnVjdHVyZSBzZXR0aW5nc1xuICBnZW5lcmFsOiB7XG4gICAgcmVtb3ZhbFBvbGljeTogY2RrLlJlbW92YWxQb2xpY3k7ICAgICAvLyBSZXNvdXJjZSByZW1vdmFsIHBvbGljeVxuICAgIGVuYWJsZURldGFpbGVkTG9nZ2luZzogYm9vbGVhbjsgICAgICAgLy8gRW5hYmxlIGRldGFpbGVkIENsb3VkV2F0Y2ggbG9nZ2luZ1xuICB9O1xuXG4gIC8vIE1vbml0b3JpbmcgY29uZmlndXJhdGlvblxuICBtb25pdG9yaW5nOiB7XG4gICAgZW5hYmxlQ2xvdWRXYXRjaEFsYXJtczogYm9vbGVhbjsgICAgICAvLyBFbmFibGUgQ2xvdWRXYXRjaCBhbGFybXNcbiAgICBsb2dSZXRlbnRpb25EYXlzOiBudW1iZXI7ICAgICAgICAgICAgIC8vIExvZyByZXRlbnRpb24gcGVyaW9kIGluIGRheXNcbiAgfTtcbn1cblxuLyoqXG4gKiBEZXZlbG9wbWVudC9UZXN0IGVudmlyb25tZW50IGNvbmZpZ3VyYXRpb25cbiAqIE9wdGltaXplZCBmb3IgY29zdCBhbmQgZGV2ZWxvcG1lbnQgd29ya2Zsb3dcbiAqL1xuZXhwb3J0IGNvbnN0IERFVl9URVNUX0NPTkZJRzogQXV0aEluZnJhRW52aXJvbm1lbnRDb25maWcgPSB7XG4gIGRhdGFiYXNlOiB7XG4gICAgaW5zdGFuY2VDbGFzczogJ2RiLnNlcnZlcmxlc3MnLCAgICAgIC8vIEF1cm9yYSBTZXJ2ZXJsZXNzIHYyIGZvciBjb3N0IG9wdGltaXphdGlvblxuICAgIGluc3RhbmNlQ291bnQ6IDEsICAgICAgICAgICAgICAgICAgICAvLyBTaW5nbGUgaW5zdGFuY2UgZm9yIGRldi90ZXN0XG4gICAgYmFja3VwUmV0ZW50aW9uRGF5czogMSwgICAgICAgICAgICAgIC8vIE1pbmltYWwgYmFja3VwIHJldGVudGlvblxuICAgIGRlbGV0aW9uUHJvdGVjdGlvbjogZmFsc2UsICAgICAgICAgICAvLyBBbGxvdyBkZWxldGlvbiBmb3IgZGV2L3Rlc3RcbiAgICBlbmFibGVQZXJmb3JtYW5jZUluc2lnaHRzOiBmYWxzZSwgICAgLy8gRGlzYWJsZSB0byBzYXZlIGNvc3RzXG4gICAgZW5hYmxlTW9uaXRvcmluZzogZmFsc2UsICAgICAgICAgICAgIC8vIERpc2FibGUgZW5oYW5jZWQgbW9uaXRvcmluZ1xuICB9LFxuICByZWRpczoge1xuICAgIG5vZGVUeXBlOiAnY2FjaGUudDRnLm1pY3JvJywgICAgICAgICAvLyBTbWFsbGVzdCBpbnN0YW5jZSBmb3IgY29zdCBvcHRpbWl6YXRpb25cbiAgICBudW1DYWNoZUNsdXN0ZXJzOiAxLCAgICAgICAgICAgICAgICAgLy8gU2luZ2xlIGNsdXN0ZXJcbiAgICBhdXRvbWF0aWNGYWlsb3ZlckVuYWJsZWQ6IGZhbHNlLCAgICAgLy8gRGlzYWJsZSBmYWlsb3ZlciBmb3IgY29zdCBzYXZpbmdzXG4gIH0sXG4gIGVjczoge1xuICAgIHRhc2tDcHU6IDUxMiwgICAgICAgICAgICAgICAgICAgICAgICAvLyBNaW5pbWFsIENQVSBhbGxvY2F0aW9uXG4gICAgdGFza01lbW9yeTogMTAyNCwgICAgICAgICAgICAgICAgICAgIC8vIE1pbmltYWwgbWVtb3J5IGFsbG9jYXRpb25cbiAgICBkZXNpcmVkQ291bnQ6IDEsICAgICAgICAgICAgICAgICAgICAgLy8gU2luZ2xlIHNlcnZlciBpbnN0YW5jZVxuICAgIG1pbkNhcGFjaXR5OiAxLCAgICAgICAgICAgICAgICAgICAgICAvLyBNaW5pbXVtIHNjYWxpbmcgY2FwYWNpdHlcbiAgICBtYXhDYXBhY2l0eTogMywgICAgICAgICAgICAgICAgICAgICAgLy8gTGltaXRlZCBzY2FsaW5nIGZvciBjb3N0IGNvbnRyb2xcbiAgICB3b3JrZXJEZXNpcmVkQ291bnQ6IDEsICAgICAgICAgICAgICAgLy8gU2luZ2xlIHdvcmtlciBpbnN0YW5jZVxuICAgIHdvcmtlck1pbkNhcGFjaXR5OiAxLCAgICAgICAgICAgICAgICAvLyBNaW5pbXVtIHdvcmtlciBjYXBhY2l0eVxuICAgIHdvcmtlck1heENhcGFjaXR5OiAyLCAgICAgICAgICAgICAgICAvLyBMaW1pdGVkIHdvcmtlciBzY2FsaW5nXG4gIH0sXG4gIGVmczoge1xuICAgIHRocm91Z2hwdXRNb2RlOiAnYnVyc3RpbmcnLCAgICAgICAgICAvLyBCdXJzdGluZyBtb2RlIGZvciBjb3N0IG9wdGltaXphdGlvblxuICAgIHJlbW92YWxQb2xpY3k6IGNkay5SZW1vdmFsUG9saWN5LkRFU1RST1ksICAvLyBEZWxldGUgRUZTIGluIGRldi90ZXN0IGVudmlyb25tZW50c1xuICB9LFxuICBnZW5lcmFsOiB7XG4gICAgcmVtb3ZhbFBvbGljeTogY2RrLlJlbW92YWxQb2xpY3kuREVTVFJPWSwgIC8vIEFsbG93IHJlc291cmNlIGRlbGV0aW9uXG4gICAgZW5hYmxlRGV0YWlsZWRMb2dnaW5nOiB0cnVlLCAgICAgICAgICAgICAgIC8vIEtlZXAgbG9nZ2luZyBmb3IgZGVidWdnaW5nXG4gIH0sXG4gIG1vbml0b3Jpbmc6IHtcbiAgICBlbmFibGVDbG91ZFdhdGNoQWxhcm1zOiBmYWxzZSwgICAgICAgLy8gRGlzYWJsZSBhbGFybXMgdG8gc2F2ZSBjb3N0c1xuICAgIGxvZ1JldGVudGlvbkRheXM6IDcsICAgICAgICAgICAgICAgICAvLyBTaG9ydCByZXRlbnRpb24gZm9yIGNvc3Qgc2F2aW5nc1xuICB9LFxufTtcblxuLyoqXG4gKiBQcm9kdWN0aW9uIGVudmlyb25tZW50IGNvbmZpZ3VyYXRpb25cbiAqIE9wdGltaXplZCBmb3IgaGlnaCBhdmFpbGFiaWxpdHksIHNlY3VyaXR5LCBhbmQgcHJvZHVjdGlvbiB3b3JrbG9hZHNcbiAqL1xuZXhwb3J0IGNvbnN0IFBST0RfQ09ORklHOiBBdXRoSW5mcmFFbnZpcm9ubWVudENvbmZpZyA9IHtcbiAgZGF0YWJhc2U6IHtcbiAgICBpbnN0YW5jZUNsYXNzOiAnZGIudDRnLmxhcmdlJywgICAgICAgLy8gTGFyZ2VyIGluc3RhbmNlIGZvciBwcm9kdWN0aW9uIHdvcmtsb2Fkc1xuICAgIGluc3RhbmNlQ291bnQ6IDIsICAgICAgICAgICAgICAgICAgICAvLyBNdWx0aS1BWiBkZXBsb3ltZW50IGZvciBoaWdoIGF2YWlsYWJpbGl0eVxuICAgIGJhY2t1cFJldGVudGlvbkRheXM6IDcsICAgICAgICAgICAgICAvLyBFeHRlbmRlZCBiYWNrdXAgcmV0ZW50aW9uXG4gICAgZGVsZXRpb25Qcm90ZWN0aW9uOiB0cnVlLCAgICAgICAgICAgIC8vIFByb3RlY3QgcHJvZHVjdGlvbiBkYXRhXG4gICAgZW5hYmxlUGVyZm9ybWFuY2VJbnNpZ2h0czogdHJ1ZSwgICAgIC8vIEVuYWJsZSBwZXJmb3JtYW5jZSBtb25pdG9yaW5nXG4gICAgZW5hYmxlTW9uaXRvcmluZzogdHJ1ZSwgICAgICAgICAgICAgIC8vIEVuYWJsZSBlbmhhbmNlZCBtb25pdG9yaW5nXG4gIH0sXG4gIHJlZGlzOiB7XG4gICAgbm9kZVR5cGU6ICdjYWNoZS50NGcuc21hbGwnLCAgICAgICAgIC8vIEFkZXF1YXRlIHNpemUgZm9yIHByb2R1Y3Rpb25cbiAgICBudW1DYWNoZUNsdXN0ZXJzOiAyLCAgICAgICAgICAgICAgICAgLy8gTXVsdGktbm9kZSBmb3IgaGlnaCBhdmFpbGFiaWxpdHlcbiAgICBhdXRvbWF0aWNGYWlsb3ZlckVuYWJsZWQ6IHRydWUsICAgICAgLy8gRW5hYmxlIGF1dG9tYXRpYyBmYWlsb3ZlclxuICB9LFxuICBlY3M6IHtcbiAgICB0YXNrQ3B1OiAxMDI0LCAgICAgICAgICAgICAgICAgICAgICAgLy8gSGlnaGVyIENQVSBmb3IgcHJvZHVjdGlvbiBwZXJmb3JtYW5jZVxuICAgIHRhc2tNZW1vcnk6IDIwNDgsICAgICAgICAgICAgICAgICAgICAvLyBIaWdoZXIgbWVtb3J5IGZvciBwcm9kdWN0aW9uIHBlcmZvcm1hbmNlXG4gICAgZGVzaXJlZENvdW50OiAyLCAgICAgICAgICAgICAgICAgICAgIC8vIE11bHRpcGxlIGluc3RhbmNlcyBmb3IgYXZhaWxhYmlsaXR5XG4gICAgbWluQ2FwYWNpdHk6IDIsICAgICAgICAgICAgICAgICAgICAgIC8vIE1pbmltdW0gcHJvZHVjdGlvbiBjYXBhY2l0eVxuICAgIG1heENhcGFjaXR5OiA2LCAgICAgICAgICAgICAgICAgICAgICAvLyBIaWdoZXIgc2NhbGluZyBsaW1pdHNcbiAgICB3b3JrZXJEZXNpcmVkQ291bnQ6IDIsICAgICAgICAgICAgICAgLy8gTXVsdGlwbGUgd29ya2VyIGluc3RhbmNlc1xuICAgIHdvcmtlck1pbkNhcGFjaXR5OiAxLCAgICAgICAgICAgICAgICAvLyBNaW5pbXVtIHdvcmtlciBjYXBhY2l0eVxuICAgIHdvcmtlck1heENhcGFjaXR5OiA0LCAgICAgICAgICAgICAgICAvLyBIaWdoZXIgd29ya2VyIHNjYWxpbmcgbGltaXRzXG4gIH0sXG4gIGVmczoge1xuICAgIHRocm91Z2hwdXRNb2RlOiAnYnVyc3RpbmcnLCAgICAgICAgICAvLyBCdXJzdGluZyBtb2RlIGZvciBtb3N0IHdvcmtsb2Fkc1xuICAgIHJlbW92YWxQb2xpY3k6IGNkay5SZW1vdmFsUG9saWN5LlJFVEFJTiwgIC8vIFJldGFpbiBFRlMgaW4gcHJvZHVjdGlvbiBlbnZpcm9ubWVudHNcbiAgfSxcbiAgZ2VuZXJhbDoge1xuICAgIHJlbW92YWxQb2xpY3k6IGNkay5SZW1vdmFsUG9saWN5LlJFVEFJTiwgIC8vIFByb3RlY3QgcHJvZHVjdGlvbiByZXNvdXJjZXNcbiAgICBlbmFibGVEZXRhaWxlZExvZ2dpbmc6IHRydWUsICAgICAgICAgICAgICAvLyBFbmFibGUgZGV0YWlsZWQgbG9nZ2luZ1xuICB9LFxuICBtb25pdG9yaW5nOiB7XG4gICAgZW5hYmxlQ2xvdWRXYXRjaEFsYXJtczogdHJ1ZSwgICAgICAgIC8vIEVuYWJsZSBwcm9kdWN0aW9uIG1vbml0b3JpbmdcbiAgICBsb2dSZXRlbnRpb25EYXlzOiAzMCwgICAgICAgICAgICAgICAgLy8gRXh0ZW5kZWQgbG9nIHJldGVudGlvblxuICB9LFxufTtcblxuLyoqXG4gKiBHZXQgZW52aXJvbm1lbnQgY29uZmlndXJhdGlvbiBiYXNlZCBvbiBlbnZpcm9ubWVudCB0eXBlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbnZpcm9ubWVudENvbmZpZyhlbnZUeXBlOiBzdHJpbmcpOiBBdXRoSW5mcmFFbnZpcm9ubWVudENvbmZpZyB7XG4gIHN3aXRjaCAoZW52VHlwZS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgY2FzZSAncHJvZCc6XG4gICAgY2FzZSAncHJvZHVjdGlvbic6XG4gICAgICByZXR1cm4gUFJPRF9DT05GSUc7XG4gICAgY2FzZSAnZGV2JzpcbiAgICBjYXNlICdkZXYtdGVzdCc6XG4gICAgY2FzZSAnZGV2ZWxvcG1lbnQnOlxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gREVWX1RFU1RfQ09ORklHO1xuICB9XG59XG5cbi8qKlxuICogTWVyZ2UgZW52aXJvbm1lbnQgY29uZmlnIHdpdGggY3VzdG9tIG92ZXJyaWRlc1xuICogQWxsb3dzIGZpbmUtZ3JhaW5lZCBjb250cm9sIG92ZXIgaW5kaXZpZHVhbCBzZXR0aW5nc1xuICovXG5leHBvcnQgZnVuY3Rpb24gbWVyZ2VFbnZpcm9ubWVudENvbmZpZyhcbiAgYmFzZUNvbmZpZzogQXV0aEluZnJhRW52aXJvbm1lbnRDb25maWcsXG4gIG92ZXJyaWRlczoge1xuICAgIGRhdGFiYXNlPzogUGFydGlhbDxBdXRoSW5mcmFFbnZpcm9ubWVudENvbmZpZ1snZGF0YWJhc2UnXT47XG4gICAgcmVkaXM/OiBQYXJ0aWFsPEF1dGhJbmZyYUVudmlyb25tZW50Q29uZmlnWydyZWRpcyddPjtcbiAgICBlY3M/OiBQYXJ0aWFsPEF1dGhJbmZyYUVudmlyb25tZW50Q29uZmlnWydlY3MnXT47XG4gICAgZWZzPzogUGFydGlhbDxBdXRoSW5mcmFFbnZpcm9ubWVudENvbmZpZ1snZWZzJ10+O1xuICAgIGdlbmVyYWw/OiBQYXJ0aWFsPEF1dGhJbmZyYUVudmlyb25tZW50Q29uZmlnWydnZW5lcmFsJ10+O1xuICAgIG1vbml0b3Jpbmc/OiBQYXJ0aWFsPEF1dGhJbmZyYUVudmlyb25tZW50Q29uZmlnWydtb25pdG9yaW5nJ10+O1xuICB9XG4pOiBBdXRoSW5mcmFFbnZpcm9ubWVudENvbmZpZyB7XG4gIHJldHVybiB7XG4gICAgZGF0YWJhc2U6IHsgLi4uYmFzZUNvbmZpZy5kYXRhYmFzZSwgLi4ub3ZlcnJpZGVzLmRhdGFiYXNlIH0sXG4gICAgcmVkaXM6IHsgLi4uYmFzZUNvbmZpZy5yZWRpcywgLi4ub3ZlcnJpZGVzLnJlZGlzIH0sXG4gICAgZWNzOiB7IC4uLmJhc2VDb25maWcuZWNzLCAuLi5vdmVycmlkZXMuZWNzIH0sXG4gICAgZWZzOiB7IC4uLmJhc2VDb25maWcuZWZzLCAuLi5vdmVycmlkZXMuZWZzIH0sXG4gICAgZ2VuZXJhbDogeyAuLi5iYXNlQ29uZmlnLmdlbmVyYWwsIC4uLm92ZXJyaWRlcy5nZW5lcmFsIH0sXG4gICAgbW9uaXRvcmluZzogeyAuLi5iYXNlQ29uZmlnLm1vbml0b3JpbmcsIC4uLm92ZXJyaWRlcy5tb25pdG9yaW5nIH0sXG4gIH07XG59XG4iXX0=